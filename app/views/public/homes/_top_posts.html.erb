<div class="card-deck mt-5">
  <% count = 0 %>
  <% posts.each_with_index do |post, index| %>
   <% unless post.user.is_deleted %>
    <div class="card px-0 shadow-lg col-4">
      <%= image_tag post.get_post_image(300, 300), class: "card-image-top h-50" %>
      <div class="card-body">
        <h4 class="card-title">
          <%= link_to new_user_registration_path, class: "text-dark" do %>
            <strong><i class="far fa-flag"></i><span> <%= post.title %></span></strong>
          <% end %>
        </h4>
        <h6 id="post_<%= post.id %>"><%= post.created_at.strftime('%Y/%m/%d') %>
          <br><span class="comments-count">コメント数:<%= post.post_comments.count %></span>
          <!--<br><span class="favorite-btn"><%#= render "public/favorites/btn", post: post %></span>-->
        </h6>
        <p class="card-text">説明:<%= post.body %></p>
        <span><i class="fas fa-user"></i> By<%= image_tag post.user.get_profile_image(30,30), class:"rounded-circle"; %><%= post.user.name %></span>
      </div>
    </div>
    <% count = index + 1 %>
   <% end %>
  <% end %>
  <% col = count != 3 ? (3-(count%3)) : 0 %>
  <% for num in 1..col %>
    <div class="col-4"></div>
  <% end %>
</div>
<%#= paginate posts %>

<style>
  .card-deck .card {
    height: 400px;
  }
</style>